Version 4
SHEET 1 3772 2324
WIRE 1920 -1296 1920 -1344
WIRE 128 -1168 128 -1328
WIRE 224 -1168 224 -1328
WIRE 304 -1168 304 -1328
WIRE 464 -1168 464 -1328
WIRE 544 -1168 544 -1328
WIRE 640 -1168 640 -1328
WIRE 1920 -1168 1920 -1216
WIRE 2032 -1168 1920 -1168
WIRE 1920 -1120 1920 -1168
WIRE 1040 -1088 1040 -1136
WIRE 1536 -1088 1536 -1120
WIRE 1504 -1072 1440 -1072
WIRE 2112 -1072 2112 -1104
WIRE 1632 -1056 1568 -1056
WIRE 2032 -1056 2032 -1168
WIRE 2080 -1056 2032 -1056
WIRE 1504 -1040 1280 -1040
WIRE 2208 -1040 2144 -1040
WIRE 2272 -1040 2208 -1040
WIRE 2080 -1024 2032 -1024
WIRE 1536 -992 1536 -1024
WIRE 1920 -992 1920 -1040
WIRE 1040 -976 1040 -1008
WIRE 2112 -976 2112 -1008
WIRE 1920 -864 1792 -864
WIRE 2032 -864 2032 -1024
WIRE 2032 -864 2000 -864
WIRE 2080 -864 2032 -864
WIRE 2208 -864 2208 -1040
WIRE 2208 -864 2160 -864
WIRE 1248 -544 1184 -544
WIRE 864 -432 832 -432
WIRE 1008 -432 944 -432
WIRE 1120 -432 1008 -432
WIRE 1248 -432 1248 -544
WIRE 1248 -432 1200 -432
WIRE 1072 -352 1072 -368
WIRE 1008 -336 1008 -432
WIRE 1040 -336 1008 -336
WIRE 1248 -320 1248 -432
WIRE 1248 -320 1104 -320
WIRE 1536 -320 1248 -320
WIRE 1040 -304 1008 -304
WIRE 1072 -272 1072 -288
WIRE 1536 -272 1536 -320
WIRE 1472 -240 1328 -240
WIRE 864 -208 736 -208
WIRE 1008 -208 1008 -304
WIRE 1008 -208 944 -208
WIRE 1120 -208 1008 -208
WIRE 1248 -208 1200 -208
WIRE 2720 -192 2560 -192
WIRE 1392 -176 1392 -192
WIRE 1472 -160 1472 -240
WIRE 1472 -160 1424 -160
WIRE 1248 -144 1248 -208
WIRE 1328 -144 1328 -240
WIRE 1328 -144 1248 -144
WIRE 1360 -144 1328 -144
WIRE 1536 -128 1536 -192
WIRE 1536 -128 1424 -128
WIRE 1968 -128 1536 -128
WIRE 1392 -96 1392 -112
WIRE 2640 -96 2640 -128
WIRE 1792 -80 1744 -80
WIRE 1968 -80 1872 -80
WIRE 2560 -80 2560 -192
WIRE 2608 -80 2560 -80
WIRE 2720 -64 2720 -192
WIRE 2720 -64 2672 -64
WIRE 2912 -64 2720 -64
WIRE 3008 -64 2912 -64
WIRE 3024 -64 3008 -64
WIRE 2256 -48 2080 -48
WIRE 2368 -48 2256 -48
WIRE 2544 -48 2368 -48
WIRE 2608 -48 2544 -48
WIRE 1856 -32 1760 -32
WIRE 1968 -32 1936 -32
WIRE 2256 0 2256 -48
WIRE 2368 0 2368 -48
WIRE 2640 0 2640 -32
WIRE 1776 16 1728 16
WIRE 1968 16 1856 16
WIRE 2112 48 2096 48
WIRE 2544 48 2544 -48
WIRE 2016 96 2016 64
WIRE 2048 96 2048 64
WIRE 2112 96 2112 48
WIRE 2256 112 2256 64
WIRE 2112 192 2112 176
WIRE 2544 192 2544 128
WIRE 2816 240 2816 208
WIRE 2912 256 2912 -64
WIRE 2912 256 2848 256
WIRE 2640 272 2592 272
WIRE 2784 272 2720 272
WIRE 2112 288 2112 256
WIRE 2880 288 2848 288
WIRE 2368 320 2368 80
WIRE 2816 336 2816 304
WIRE 2544 352 2544 288
WIRE 1440 640 1440 576
WIRE 1808 752 1808 592
WIRE 1440 768 1440 720
WIRE 1760 768 1440 768
WIRE 1808 896 1808 848
WIRE 2336 896 2064 896
WIRE 1440 928 1440 768
WIRE 2160 1008 2160 976
WIRE 2064 1024 2064 896
WIRE 2128 1024 2064 1024
WIRE 1808 1040 1808 976
WIRE 1808 1040 1584 1040
WIRE 2336 1040 2336 896
WIRE 2336 1040 2192 1040
WIRE 2432 1040 2336 1040
WIRE 2448 1040 2432 1040
WIRE 1808 1056 1808 1040
WIRE 1904 1056 1808 1056
WIRE 2016 1056 1984 1056
WIRE 2128 1056 2016 1056
WIRE 1584 1072 1584 1040
WIRE 2160 1104 2160 1072
WIRE 1808 1136 1808 1056
WIRE 2016 1136 2016 1056
WIRE 1440 1184 1440 1008
WIRE 1440 1184 1136 1184
WIRE 2016 1248 2016 1200
WIRE 800 1264 720 1264
WIRE 976 1264 864 1264
WIRE 1088 1264 976 1264
WIRE 976 1296 976 1264
WIRE 1136 1344 1136 1280
WIRE 1584 1344 1584 1152
WIRE 1808 1344 1808 1200
WIRE 976 1408 976 1376
FLAG 1920 -992 0
FLAG 1920 -1344 Vdd
FLAG 2112 -1104 Vdd
FLAG 2112 -976 Vss
FLAG 1536 -1120 Vdd
FLAG 1536 -992 Vss
FLAG 1040 -976 0
FLAG 1040 -1136 Vth
FLAG 1440 -1072 Vth
FLAG 2256 112 0
FLAG 3008 -64 Vmem_out
FLAG 1792 -864 Vmem_out
FLAG 1632 -1056 Vmem_spiked
IOPIN 1632 -1056 Out
FLAG 2048 96 Vmem_spiked
FLAG 2016 96 C1_post
FLAG 2272 -1040 C1_post
FLAG 1744 -80 Vdd
FLAG 1760 -32 Vss
FLAG 1728 16 Vss
FLAG 2640 -128 Vdd
FLAG 2640 0 Vss
FLAG 2112 288 0
FLAG 1808 1344 0
FLAG 2160 1104 Vss
FLAG 2160 976 Vdd
FLAG 1584 1344 0
FLAG 1136 1344 0
FLAG 720 1264 Vmem_spiked
FLAG 976 1408 0
FLAG 2016 1248 0
FLAG 1440 576 V3_3
FLAG 1808 592 V3_3
FLAG 2432 1040 Vhebb
FLAG 1280 -1040 Vmem_out
FLAG 2544 352 0
FLAG 2816 208 Vdd
FLAG 2816 336 Vss
FLAG 2880 288 0
FLAG 736 -208 DIn
IOPIN 736 -208 In
FLAG 464 -1328 Vdd
IOPIN 464 -1328 BiDir
FLAG 544 -1328 Vss
IOPIN 544 -1328 BiDir
FLAG 640 -1328 V3_3
IOPIN 640 -1328 BiDir
FLAG 128 -1328 Vmem_spiked
IOPIN 128 -1328 Out
FLAG 224 -1328 Vhebb
IOPIN 224 -1328 Out
FLAG 304 -1328 Vmem_out
IOPIN 304 -1328 Out
FLAG 2368 320 0
FLAG 1072 -272 Vss
FLAG 1392 -96 Vss
FLAG 832 -432 0
FLAG 1072 -368 Vdd
FLAG 1392 -192 Vdd
SYMBOL AnalogMux 2016 -48 R0
SYMATTR InstName X1
SYMBOL OpAmps\\UniversalOpAmp2 2112 -1040 R0
SYMATTR InstName U1
SYMBOL res 2016 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 200k
SYMBOL res 2176 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 400k
SYMBOL res 1904 -1312 R0
SYMATTR InstName R3
SYMATTR Value 448k
SYMBOL res 1904 -1136 R0
SYMATTR InstName R4
SYMATTR Value 152k
SYMBOL OpAmps\\UniversalOpAmp2 1536 -1056 R0
SYMATTR InstName U2
SYMBOL voltage 1040 -1104 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.6
SYMBOL cap 2240 0 R0
SYMATTR InstName C1
SYMATTR Value 500n
SYMBOL res 2352 -16 R0
SYMATTR InstName R5
SYMATTR Value 250k
SYMBOL res 1872 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1.6k
SYMBOL res 1952 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 600
SYMBOL res 1888 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 600
SYMBOL OpAmps\\UniversalOpAmp2 2640 -64 R0
SYMATTR InstName U3
SYMBOL cap 2096 192 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res 2096 80 R0
SYMATTR InstName R11
SYMATTR Value 100
SYMBOL pmos 1760 848 M180
SYMATTR InstName M1
SYMATTR Value Si7540DP_P
SYMBOL cap 1824 1136 M0
SYMATTR InstName C3
SYMATTR Value 2n
SYMATTR SpiceLine Rser=50
SYMBOL res 1824 880 M0
SYMATTR InstName R12
SYMATTR Value 3k
SYMBOL res 1600 1056 M0
SYMATTR InstName R13
SYMATTR Value 5Meg
SYMBOL OpAmps\\UniversalOpAmp2 2160 1040 R0
SYMATTR InstName U4
SYMBOL res 1424 624 R0
SYMATTR InstName R14
SYMATTR Value 40k
SYMBOL nmos 1088 1184 R0
SYMATTR InstName M2
SYMATTR Value Si7540DP_N
SYMBOL cap 864 1248 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 400p
SYMATTR SpiceLine Rser=10
SYMBOL res 960 1280 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1424 912 R0
SYMATTR InstName R16
SYMATTR Value 5k
SYMBOL res 2000 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1Meg
SYMBOL cap 2000 1136 R0
SYMATTR InstName C5
SYMATTR Value 5p
SYMBOL nmos 2592 192 M0
SYMATTR InstName M3
SYMATTR Value QS6K21
SYMBOL res 2560 32 M0
SYMATTR InstName R31
SYMATTR Value 15k
SYMBOL OpAmps\\UniversalOpAmp2 2816 272 M0
SYMATTR InstName U8
SYMBOL res 2624 256 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 3k
SYMBOL OpAmps\\UniversalOpAmp2 1072 -320 R0
SYMATTR InstName U6
SYMBOL res 960 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 50k
SYMBOL res 1216 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 50k
SYMBOL res 960 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 50k
SYMBOL res 1216 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL OpAmps\\UniversalOpAmp2 1392 -144 M0
SYMATTR InstName U7
SYMBOL res 1520 -288 R0
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL cap 1184 -560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10p
TEXT 2200 -184 Left 2 ;Scaled x40 +2.8V
TEXT 1936 1328 Left 2 ;filtering is overkill but when real mos is used maybe it will be needed
TEXT 2688 936 Left 2 ;rounding at the top of feedback spike is issue, higher latency, no problem bc of peak detector
TEXT 640 1168 Left 2 ;Attention to reach treshold of NMOS
TEXT 1552 -1536 Left 2 ;spike monitoring circuit
TEXT 1832 -600 Left 2 ;spike generation circuit
