Version 4
SHEET 1 2244 680
WIRE 1488 -1616 1440 -1616
WIRE 1600 -1616 1568 -1616
WIRE 1616 -1616 1600 -1616
WIRE 1744 -1616 1696 -1616
WIRE 1680 -1488 1680 -1520
WIRE 1488 -1472 1328 -1472
WIRE 1600 -1472 1600 -1616
WIRE 1648 -1472 1600 -1472
WIRE 1744 -1456 1744 -1616
WIRE 1744 -1456 1712 -1456
WIRE 1920 -1456 1744 -1456
WIRE 1568 -1440 1568 -1472
WIRE 1648 -1440 1568 -1440
WIRE 112 -1424 112 -1552
WIRE 416 -1424 416 -1552
WIRE 208 -1408 160 -1408
WIRE 368 -1408 208 -1408
WIRE 1680 -1392 1680 -1424
WIRE 1488 -1376 1456 -1376
WIRE 1568 -1376 1568 -1440
WIRE 112 -1296 112 -1328
WIRE 112 -1296 -336 -1296
WIRE 208 -1296 208 -1408
WIRE 208 -1296 112 -1296
WIRE -1376 -1280 -1376 -1392
WIRE -1200 -1280 -1200 -1392
WIRE -1024 -1280 -1024 -1392
WIRE -880 -1280 -880 -1392
WIRE 1056 -1216 1056 -1248
WIRE 1024 -1200 928 -1200
WIRE 1168 -1184 1088 -1184
WIRE 1456 -1184 1456 -1376
WIRE 1456 -1184 1168 -1184
WIRE 1760 -1184 1456 -1184
WIRE 1920 -1184 1760 -1184
WIRE 1024 -1168 992 -1168
WIRE 416 -1136 416 -1328
WIRE 448 -1136 416 -1136
WIRE 576 -1136 448 -1136
WIRE 656 -1136 576 -1136
WIRE 768 -1136 656 -1136
WIRE 880 -1136 768 -1136
WIRE 992 -1136 992 -1168
WIRE 992 -1136 960 -1136
WIRE 1088 -1136 992 -1136
WIRE 1168 -1136 1168 -1184
WIRE 1056 -1104 1056 -1152
WIRE 576 -1056 576 -1136
WIRE 448 -1040 448 -1136
WIRE -336 -1024 -336 -1296
WIRE -336 -1024 -1152 -1024
WIRE 1328 -1024 1328 -1472
WIRE 1328 -1024 1072 -1024
WIRE 1584 -1024 1552 -1024
WIRE 1680 -1024 1664 -1024
WIRE 1760 -1024 1760 -1184
WIRE 1760 -1024 1744 -1024
WIRE -336 -960 -336 -1024
WIRE -1152 -944 -1152 -1024
WIRE 1152 -944 1152 -976
WIRE 1472 -928 1184 -928
WIRE 1552 -928 1552 -1024
WIRE 1552 -928 1472 -928
WIRE 1584 -928 1552 -928
WIRE 1680 -928 1664 -928
WIRE 1760 -928 1760 -1024
WIRE 1760 -928 1744 -928
WIRE 768 -912 768 -1136
WIRE 1072 -912 1072 -1024
WIRE 1120 -912 1072 -912
WIRE 1232 -896 1184 -896
WIRE 1472 -864 1472 -928
WIRE 1072 -848 1072 -912
WIRE 1152 -848 1152 -880
WIRE -1152 -832 -1152 -880
WIRE -928 -832 -1152 -832
WIRE -336 -832 -336 -896
WIRE -192 -832 -336 -832
WIRE -1152 -784 -1152 -832
WIRE 768 -768 768 -832
WIRE -336 -752 -336 -832
WIRE 832 -752 816 -752
WIRE 1072 -752 1072 -848
WIRE 1072 -752 912 -752
WIRE 1088 -752 1072 -752
WIRE 1232 -752 1232 -896
WIRE 1232 -752 1168 -752
WIRE 1472 -736 1472 -800
WIRE -1152 -640 -1152 -704
WIRE -928 -640 -1152 -640
WIRE -336 -640 -336 -672
WIRE -192 -640 -336 -640
WIRE 448 -640 448 -960
WIRE 576 -640 576 -992
WIRE 768 -640 768 -672
WIRE 1232 -640 1232 -672
WIRE -1152 -528 -1152 -640
WIRE -336 -512 -336 -640
WIRE -1440 -448 -1568 -448
WIRE -1200 -448 -1360 -448
WIRE -592 -432 -720 -432
WIRE -384 -432 -512 -432
WIRE -1568 -336 -1568 -448
WIRE -720 -320 -720 -432
WIRE -336 -272 -336 -416
WIRE -1152 -256 -1152 -432
WIRE -1568 -128 -1568 -256
WIRE -720 -112 -720 -240
FLAG 1472 -736 0
FLAG 1056 -1248 Vcc
FLAG 576 -640 0
FLAG 1152 -976 Vcc
FLAG 1152 -848 -Vcc
FLAG 1232 -640 0
FLAG 1056 -1104 -Vcc
FLAG 768 -640 -Vcc
FLAG 928 -1200 0
FLAG -1024 -1200 0
FLAG -1024 -1392 Vcc
FLAG -880 -1200 0
FLAG -880 -1392 Vref
FLAG -1200 -1200 0
FLAG -1200 -1392 -Vcc
FLAG 1920 -1184 Vlif
FLAG 656 -1136 Vmem
FLAG 1072 -848 Vrefact
FLAG -336 -272 0
FLAG -1376 -1200 0
FLAG -1376 -1392 Vread
FLAG 112 -1552 Vread
FLAG 416 -1552 Vread
FLAG -720 -112 0
FLAG -1152 -256 0
FLAG -1568 -128 0
FLAG 448 -640 0
FLAG 1680 -1520 Vcc
FLAG 1680 -1392 -Vcc
FLAG 1920 -1456 Vlif_real
FLAG 1440 -1616 0
SYMBOL cap 1456 -864 R0
SYMATTR InstName C1
SYMATTR Value 587n
SYMBOL res 1680 -944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL OpAmps\\UniversalOpAmp2 1056 -1184 R0
SYMATTR InstName U1
SYMBOL cap 560 -1056 R0
SYMATTR InstName Cint
SYMATTR Value 1µ
SYMBOL res 432 -1056 R0
SYMATTR InstName Rbleed
SYMATTR Value 50k
SYMBOL OpAmps\\UniversalOpAmp2 1152 -912 M0
SYMATTR InstName U2
SYMBOL res 1184 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 300k
SYMBOL res 1216 -768 R0
SYMATTR InstName R4
SYMATTR Value 200k
SYMBOL pmos 816 -672 R180
SYMATTR InstName M1
SYMATTR Value Si7540DP_P
SYMBOL res 752 -928 R0
SYMATTR InstName R5
SYMATTR Value 100R
SYMBOL res 928 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL diode 1680 -912 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL diode 1744 -1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMBOL res 1680 -1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 15k
SYMBOL res 976 -1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 200k
SYMBOL res 1184 -1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 500k
SYMBOL voltage -1024 -1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -880 -1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2
SYMBOL voltage -1200 -1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -5
SYMBOL nmos -384 -512 R0
SYMATTR InstName M3
SYMATTR Value Si7540DP_N
SYMBOL pmos 160 -1328 R180
SYMATTR InstName M4
SYMATTR Value Si7540DP_P
SYMBOL pmos 368 -1328 M180
SYMATTR InstName M5
SYMATTR Value Si7540DP_P
SYMBOL voltage -1376 -1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 4
SYMBOL res -1168 -800 R0
SYMATTR InstName Rmem1
SYMATTR Value 13.333k
SYMBOL res -352 -768 R0
SYMATTR InstName Rmem2
SYMATTR Value 11.333k
SYMBOL nmos -1200 -528 R0
SYMATTR InstName M6
SYMATTR Value Si7540DP_N
SYMBOL voltage -720 -336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 1.5m 1n 1n 2m 10m)
SYMBOL res -496 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 3.3k
SYMBOL voltage -1568 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 5 1m 1n 1n 2m 10m)
SYMBOL res -1344 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 3.3k
SYMBOL diode -352 -960 R0
SYMATTR InstName D1
SYMBOL diode -1168 -944 R0
SYMATTR InstName D2
SYMBOL OpAmps\\UniversalOpAmp2 1680 -1456 R0
SYMATTR InstName U3
SYMBOL res 1584 -1600 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL res 1712 -1600 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 1Meg
SYMBOL res 1584 -1360 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 1Meg
SYMBOL res 1584 -1456 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 1Meg
TEXT -1064 -1128 Left 2 !.tran 200m startup
TEXT 1400 -1080 Left 2 ;R7 sets duration of spike pulse
TEXT 1528 -880 Left 2 ;R1 sets duration of refractory period
TEXT 912 -1408 Left 2 ;U1 non-inverting schimtt trigger \nVut = - (R8/R9)*Vsat = 2V\nVlt = - (R8/R9)*Vsat = -2V
TEXT 1024 -592 Left 2 ;U2 inverting schimtt trigger \nVut = R4/(R3 + R4)*Vsat = 2V\nVlt = R4/(R3 + R4)*Vsat = -2V
